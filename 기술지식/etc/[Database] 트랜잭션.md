# 트랜잭션(Transaction)의 개념
- 데이터베이스 트랜잭션은 데이터베이스 관리 시스템 또는 유사한 시스템에서 상호작용의 단위이다.

- 유사한 시스템이란 트랜잭션이 성공과 실패가 분명하고 상호 독립적이며, 일관되고 믿을 수 있는 시스템을 의미한다.

- 쉽게 말해 트랜잭션은 하나의 작업을 수행하기 위해 필요한 데이터베이스의 연산들을 모아둔 것이라고 할수 있고, 이는 데이터베이스에서 논리적인 작업 단위이고 장애 발생시 데이터를 복구하는 작업의 단위이다.

> 데이터베이스는 정확한 데이터를 유지 및 오류를 빠르게 복구하고, 데이터베이스가 항상 일관된 상태를 유지할수 있도록 여러 기능을 제공하는데, 그러한 기능들에서 가장 중요한 역할을 하는것이 트랜잭션이다.

> 데이터베이스 연산은 SQL문으로 표현되므로 트랜잭션을 작업 수행에 필요한 SQL문들의 모임으로 이해해도 되지만, 하나의 SQL문을 트랜잭션의 단위로 생각하면 안된다.

> 트랜잭션의 모든 명령문이 완벽하게 처리 되거나 하나도 처리되지 않아야 데이터베이스 모순이 없는 일관된 상태가 유지되는 것이다.

> 트랜잭션은 데이터베이스에 장애가 발생했을 때 복구 작업을 수행하거나, 다수의 사용자가 동시에 사용할 수 있도록 제어 작업을 하는 데 중요한 단위로 사용된다.

# 트랜잭션의 특징(ACID)
> 1. Atomicity(원자성)
> 2. Consistency(일관성)
> 3. Isolation(격리성)
> 4. Durability(지속성)

### Atomicity(원자성)
  - 트랜잭션을 구성하는 연산들이 모두 정상적으로 실행되거나 하나도 실행되지 않아야 한다는 all-or-nothong 방식

  - 트랜잭션을 수행하다가 장애가 발생하여 작업을 완료하지 못했다면, 지금까지 실행한 연산들을 모두 취소하고 데이터베이스를 트랜잭션 작업 전의 상태로 되돌려 트랜잭션의 원자성을 보장

  - 트랜잭션의 원자성을 보장하려면 발생했을 때 데이터베이스의 원래 상태로 복구하는 회복기능이 필요

### Consistency(일관성)
  - 트랜잭션이 성공적으로 수행된 후에도 데이터베이스가 일관성 있는 상태를 유해야함

  - 트랜잭션이 수행되기 전에 데이터베이스가 일관된 상태였다면 트랜잭션의 수행이 완료된 후 결과를 반영한 데이터베이스도 일관된 상태가 되어야함.

### Isolation(격리성)
  - 현재 수행 중인 트랜잭션이 완료 될때까지 트랜잭션이 생성한 중간 연산 결과에 따른 트랜잭션들이 접근할 수 없음, 트랜잭션이 동시에 수행 되지 못한다는 뜻은 아님

  - 트랜잭션들이 비동기적으로 수행되는거처럼 느끼면서도 순서대로 하나씩 수행되는것 같이 정확하고 일관된 결과를 얻을 수 있다.

### Durability(지속성)
  - 트랜잭션이 성공적으로 완료된 후 데이터베이스에 반영한 결과는 어떠한 경우에도 손실되지 않고 영구적이어야한다.

  - 시스템에 장애가 발생하더라도 트랜잭션 작업 결과는 없어지지 않고 데이터베이스에 그대로 남아야 한다.

# 트랜잭션 연산 및 상태

### Commit연산
- Commit 연산은 트랜잭션에 대한 작업이 성공적으로 끝났고 데이터베이스가 다시 일관된 상태에 있을 때, 이 트랜잭션이 행한 갱신 연산이 완료된 것을 트랜잭션 관리자에게 알려주는 연산이다.

### Rollback연산
- Rollback 연산은 하나의 트랜잭션 처리가 비정상적으로 종료되어 데이터베이스의 일관성을 깨뜨렸을 때, 이 트랜잭션의 일부가 정상적으로 처리되었더라도 트랜잭션의 원자성을 구현하기 위해 이 트랜잭션이 행한 모든 연산을 취소하는 연산이다.
- Rollback시에는 해당 트랜잭션을 재시작하거나 폐기한다.

### 트랜잭션의 상태
> 활동(Active) : 트랜잭션이 실행중인 상태
> 실패(Failed) : 실행에 오류가 발생하여 중단된 상태
> 철회(Aborted) : 비정상적으로 종료되어 Rollback 연산을 수행한 상태
> 부분 완료(Partially Committed) : 마지막 연산까지 실행했지만, Commit 연산이 실행되기 직전의 상태
> 완료(Committed) : 성공적으로 종료되어 Commit 연산을 실행한 후의 상태

###### 출처
> https://coding-factory.tistory.com/226
> https://brunch.co.kr/@skeks463/27
> http://wiki.hash.kr/index.php/%ED%8A%B8%EB%9E%9C%EC%9E%AD%EC%85%98
